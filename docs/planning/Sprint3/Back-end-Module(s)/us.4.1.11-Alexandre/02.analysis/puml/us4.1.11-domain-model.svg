<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="CLASS" height="501px" preserveAspectRatio="none" style="width:612px;height:501px;background:#FFFFFF;" version="1.1" viewBox="0 0 612 501" width="612px" zoomAndPan="magnify"><title>Domain Model - VVE Completion (US4.1.11)</title><defs/><g><g class="title" data-source-line="3"><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="343.041" x="127.9664" y="22.9951">Domain Model - VVE Completion (US4.1.11)</text></g><!--class VesselVisitExecution--><g class="entity" data-qualified-name="VesselVisitExecution" data-source-line="8" id="ent0002"><rect fill="#F1F1F1" height="219.2344" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="216.5723" x="7" y="44.2969"/><ellipse cx="40.0088" cy="64.4297" fill="#C2C2C2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M42.9775,70.0703 Q42.3994,70.3672 41.7588,70.5078 Q41.1182,70.6641 40.415,70.6641 Q37.915,70.6641 36.5869,69.0234 Q35.2744,67.3672 35.2744,64.2422 Q35.2744,61.1172 36.5869,59.4609 Q37.915,57.8047 40.415,57.8047 Q41.1182,57.8047 41.7588,57.9609 Q42.415,58.1172 42.9775,58.4141 L42.9775,61.1328 Q42.3525,60.5547 41.7588,60.2891 Q41.165,60.0078 40.54,60.0078 Q39.1963,60.0078 38.5088,61.0859 Q37.8213,62.1484 37.8213,64.2422 Q37.8213,66.3359 38.5088,67.4141 Q39.1963,68.4766 40.54,68.4766 Q41.165,68.4766 41.7588,68.2109 Q42.3525,67.9297 42.9775,67.3516 L42.9775,70.0703 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="105.2285" x="77.6729" y="60.4355">&#171;AggregateRoot&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144.5527" x="58.0107" y="76.2607">VesselVisitExecution</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="222.5723" y1="84.5625" y2="84.5625"/><g data-visibility-modifier="PUBLIC_FIELD"><ellipse cx="18" cy="98.2109" fill="none" rx="3" ry="3" style="stroke:#545454;stroke-width:1;"/></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127.1074" x="27" y="101.5576">id: UniqueEntityID</text><g data-visibility-modifier="PUBLIC_FIELD"><ellipse cx="18" cy="114.5078" fill="none" rx="3" ry="3" style="stroke:#545454;stroke-width:1;"/></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119.6768" x="27" y="117.8545">vesselImo: string</text><g data-visibility-modifier="PUBLIC_FIELD"><ellipse cx="18" cy="130.8047" fill="none" rx="3" ry="3" style="stroke:#545454;stroke-width:1;"/></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="166.1611" x="27" y="134.1514">actualArrivalTime: Date</text><g data-visibility-modifier="PUBLIC_FIELD"><ellipse cx="18" cy="147.1016" fill="none" rx="3" ry="3" style="stroke:#545454;stroke-width:1;"/></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="158.7646" x="27" y="150.4482">actualBerthTime: Date</text><g data-visibility-modifier="PUBLIC_FIELD"><ellipse cx="18" cy="163.3984" fill="none" rx="3" ry="3" style="stroke:#545454;stroke-width:1;"/></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140.6289" x="27" y="166.7451">actualDockId: string</text><g data-visibility-modifier="PUBLIC_FIELD"><ellipse cx="18" cy="179.6953" fill="none" rx="3" ry="3" style="stroke:#545454;stroke-width:1;"/></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="177.8848" x="27" y="183.042">actualUnBerthTime: Date</text><g data-visibility-modifier="PUBLIC_FIELD"><ellipse cx="18" cy="195.9922" fill="none" rx="3" ry="3" style="stroke:#545454;stroke-width:1;"/></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="190.5723" x="27" y="199.3389">actualLeavePortTime: Date</text><g data-visibility-modifier="PUBLIC_FIELD"><ellipse cx="18" cy="212.2891" fill="none" rx="3" ry="3" style="stroke:#545454;stroke-width:1;"/></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.374" x="27" y="215.6357">status: string</text><g data-visibility-modifier="PUBLIC_FIELD"><ellipse cx="18" cy="228.5859" fill="none" rx="3" ry="3" style="stroke:#545454;stroke-width:1;"/></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="138.6533" x="27" y="231.9326">creatorEmail: string</text><g data-visibility-modifier="PUBLIC_FIELD"><ellipse cx="18" cy="244.8828" fill="none" rx="3" ry="3" style="stroke:#545454;stroke-width:1;"/></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="115.9102" x="27" y="248.2295">updatedAt: Date</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="222.5723" y1="255.5313" y2="255.5313"/></g><!--class AuditEntry--><g class="entity" data-qualified-name="AuditEntry" data-source-line="21" id="ent0003"><rect fill="#F1F1F1" height="154.0469" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134.1719" x="48.2" y="340.5269"/><ellipse cx="75.8932" cy="360.6597" fill="#C2C2C2" rx="11" ry="11" style="stroke:#181818;stroke-width:1;"/><path d="M78.8619,366.3003 Q78.2838,366.5972 77.6432,366.7378 Q77.0025,366.8941 76.2994,366.8941 Q73.7994,366.8941 72.4713,365.2534 Q71.1588,363.5972 71.1588,360.4722 Q71.1588,357.3472 72.4713,355.6909 Q73.7994,354.0347 76.2994,354.0347 Q77.0025,354.0347 77.6432,354.1909 Q78.2994,354.3472 78.8619,354.6441 L78.8619,357.3628 Q78.2369,356.7847 77.6432,356.5191 Q77.0494,356.2378 76.4244,356.2378 Q75.0807,356.2378 74.3932,357.3159 Q73.7057,358.3784 73.7057,360.4722 Q73.7057,362.5659 74.3932,363.6441 Q75.0807,364.7066 76.4244,364.7066 Q77.0494,364.7066 77.6432,364.4409 Q78.2369,364.1597 78.8619,363.5816 L78.8619,366.3003 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="49.7168" x="104.8379" y="356.6655">&#171;Entity&#187;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73.9648" x="92.7139" y="372.4907">AuditEntry</text><line style="stroke:#181818;stroke-width:0.5;" x1="49.2" x2="181.3719" y1="380.7925" y2="380.7925"/><g data-visibility-modifier="PUBLIC_FIELD"><ellipse cx="59.2" cy="394.4409" fill="none" rx="3" ry="3" style="stroke:#545454;stroke-width:1;"/></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99.3877" x="68.2" y="397.7876">entryId: string</text><g data-visibility-modifier="PUBLIC_FIELD"><ellipse cx="59.2" cy="410.7378" fill="none" rx="3" ry="3" style="stroke:#545454;stroke-width:1;"/></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.6973" x="68.2" y="414.0845">at: Date</text><g data-visibility-modifier="PUBLIC_FIELD"><ellipse cx="59.2" cy="427.0347" fill="none" rx="3" ry="3" style="stroke:#545454;stroke-width:1;"/></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.5273" x="68.2" y="430.3814">by: string</text><g data-visibility-modifier="PUBLIC_FIELD"><ellipse cx="59.2" cy="443.3316" fill="none" rx="3" ry="3" style="stroke:#545454;stroke-width:1;"/></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="92.4492" x="68.2" y="446.6782">action: string</text><g data-visibility-modifier="PUBLIC_FIELD"><ellipse cx="59.2" cy="459.6284" fill="none" rx="3" ry="3" style="stroke:#545454;stroke-width:1;"/></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.1719" x="68.2" y="462.9751">changes: string</text><g data-visibility-modifier="PUBLIC_FIELD"><ellipse cx="59.2" cy="475.9253" fill="none" rx="3" ry="3" style="stroke:#545454;stroke-width:1;"/></g><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="80.8965" x="68.2" y="479.272">note: string</text><line style="stroke:#181818;stroke-width:0.5;" x1="49.2" x2="181.3719" y1="486.5737" y2="486.5737"/></g><g class="entity" data-qualified-name="GMN5" data-source-line="44" id="ent0006"><path d="M258.59,95.9469 L258.59,149.9169 L223.95,153.9169 L258.59,157.9169 L258.59,211.8766 A0,0 0 0 0 258.59,211.8766 L605.9738,211.8766 A0,0 0 0 0 605.9738,211.8766 L605.9738,105.9469 L595.9738,95.9469 L258.59,95.9469 A0,0 0 0 0 258.59,95.9469" fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><path d="M595.9738,95.9469 L595.9738,105.9469 L605.9738,105.9469 L595.9738,95.9469" fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185.6753" x="264.59" y="113.0138">Aggregate invariants (local):</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="326.3838" x="264.59" y="128.1466">- status must be "In Progress" to allow completion</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="272.3081" x="264.59" y="143.2794">- actualUnBerthTime &gt;= actualBerthTime</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="301.8438" x="264.59" y="158.4122">- actualLeavePortTime &gt;= actualUnBerthTime</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150.7188" x="264.59" y="173.545">- auditLog append-only</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179.2451" x="264.59" y="188.6778">Read-only post-completion:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="315.8403" x="264.59" y="203.8106">- Only admin users may modify after completion</text></g><g class="entity" data-qualified-name="GMN8" data-source-line="54" id="ent0009"><path d="M217.78,367.1569 L217.78,413.5569 L182.86,417.5569 L217.78,421.5569 L217.78,467.9537 A0,0 0 0 0 217.78,467.9537 L412.7883,467.9537 A0,0 0 0 0 412.7883,467.9537 L412.7883,377.1569 L402.7883,367.1569 L217.78,367.1569 A0,0 0 0 0 217.78,367.1569" fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><path d="M402.7883,367.1569 L402.7883,377.1569 L412.7883,377.1569 L402.7883,367.1569" fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.4233" x="223.78" y="384.2238">Audit captures:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.2852" x="223.78" y="399.3566">- timestamp (at)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67.3994" x="223.78" y="414.4894">- user (by)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174.0083" x="223.78" y="429.6222">- action (SET_COMPLETED)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.8643" x="223.78" y="444.755">- changes snapshot</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94.9292" x="223.78" y="459.8878">- optional note</text></g><!--reverse link VesselVisitExecution to AuditEntry--><g class="link" data-entity-1="ent0002" data-entity-2="ent0003" data-link-type="composition" data-source-line="38" id="lnk4"><path codeLine="38" d="M115.29,275.9769 C115.29,301.6369 115.29,316.4469 115.29,340.3069" fill="none" id="VesselVisitExecution-backto-AuditEntry" style="stroke:#181818;stroke-width:1;"/><polygon fill="#181818" points="115.29,263.9769,111.29,269.9769,115.29,275.9769,119.29,269.9769,115.29,263.9769" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56.6147" x="116.29" y="306.5938">auditLog</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8.271" x="107.0427" y="283.5794">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23.0356" x="91.2319" y="329.5676">0..*</text></g><!--SRC=[XLHDJ-D03BtdLrYzR0lRifNsL05Ib-PG2HR4Hwyhat6I4PDnc9cKZLRyz_NGqYyApI5AR3_x-Tap_adR6XrMKB7bh7HS4GJNKE9N7b-YuXTj2yZHU4g23ePWmXLg2rUio40VPhCKBhYg3GND5heFTpy7my5ms4kIRt3ssIE-SL4uAZ3G26RaFPcPzZgaVobhOgOlqPb1x_V2uFHqbVYMEPoVmxy4u5Yh4JnO_TnGQgMFTZg9rlbRXcd58_31IQVHY5beq8oTqtCqzxeIWXF9jdRz8XVAVOu9PqzJzJ7NW_qKSaaufnjsOTlf0uR6RsRA765WbuhuPjFUr4emQXoMuDTagSwuKQAB3QuLJHPDluj1qRf3DAoBFxOxBOYkMrHAj0LjiRCSvxZyVpqq-hkchgNbk5aKYMdoqDKve6rx1w2_sH9O8aKASdQGiIDvlU_VTyZG0Ye5IcPnaZcKS4SvERAPL37IeWCfvUYvqOxK8Qgt9119x4jT-ozZzsvZPzY1etuVEZy6WwFEvan6WF7daelaOCj1c9-0jdDq6ctucaSS1JXTb04utt-qLYTa8oTq3MTeUgEa3uljWwhn0Hu9EbCBDuu5utq70WCQmoyRgWlamwB3-Hdi79TLsDRIhmCtq35qAGzWNPDLVRQcJMu95rzGim_zDOL8-phQKLLoEpMUd3I0hLnlIkTYpkFWDoXBIeXI9Jk2hKUKl7tAGjMXaTPZXI3KH9ogXYw6dXXY7UW-jhr5Rsytu5rw_-VY-khcChrF9z6nF2_WBTQ-v20chcCicWM5Tox_0G00]--></g></svg>