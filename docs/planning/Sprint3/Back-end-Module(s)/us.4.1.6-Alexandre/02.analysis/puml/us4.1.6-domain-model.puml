@startuml
skinparam monochrome true
skinparam shadowing false
title Domain Model â€“ Resource Allocation Query (US4.1.6)

' =========================
' Aggregate: OperationPlan
' =========================
class OperationPlan <<AggregateRoot>> {
  +id: UniqueEntityID
  +status: string
  +planDate: Date
}

class Operation <<Entity>> {
  +operationId: string
  +vvnId: string
  +dock: string
  +startTime: number
  +endTime: number
  +physicalResourceId: string
  +craneCountUsed: number
}

class StaffAssignment <<ValueObject>> {
  +staffId: string
  +startTime: number
  +endTime: number
}

' =========================
' Resource entities
' =========================
class Dock <<Entity>> {
  +dockId: string
  +name: string
}

class PhysicalResource <<Entity>> {
  +resourceId: string
  +name: string
  +type: string
}

class StaffMember <<Entity>> {
  +staffId: string
  +name: string
}

' =========================
' Relationships
' =========================
OperationPlan "1" *-- "0..*" Operation : operations
Operation "1" *-- "0..*" StaffAssignment : staffAssignments

Operation "0..*" --> "1" Dock : uses >
Operation "0..*" --> "1" PhysicalResource : assigned >
StaffAssignment "0..*" --> "1" StaffMember : assigns >

' =========================
' Notes
' =========================
note right of OperationPlan
Only SAVED OperationPlans
are included in aggregation
Derived metrics like craneBusyTime
and totalPlanTime are computed
for queries
end note

@enduml
