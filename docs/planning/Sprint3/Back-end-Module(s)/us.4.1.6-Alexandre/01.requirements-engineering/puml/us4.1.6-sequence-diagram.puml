@startuml
skinparam monochrome true
skinparam shadowing false
title System Sequence Diagram â€“ Query the total allocation time of a specific resource (US4.1.6)

actor "Logistics Operator" as Operator
boundary "Physical Resource Management API" as System

== Get Current Operation Plans (by Resource and Date interval) ==
Operator -> System : GET /api/resources/{resourceCode}/operation-plans?from={busyFrom}&to={busyTo}
alt Resource exists
  System -> System : Filter plans by resource and date interval\nAggregate craneBusyTime, totalPlanTime, numberOfOperations
  alt Plans found
    System --> Operator : 200 OK\nBody: List<OperationPlanDto> + aggregated totals
  else No plans found
    System --> Operator : 200 OK\nBody: empty list + busyTime = 0
  end
else Resource not found
  System --> Operator : 404 Not Found\nBody: ProblemDetails
end

@enduml
