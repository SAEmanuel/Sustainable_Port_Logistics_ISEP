<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="859px" preserveAspectRatio="none" style="width:1609px;height:859px;background:#FFFFFF;" version="1.1" viewBox="0 0 1609 859" width="1609px" zoomAndPan="magnify"><title>Sequence Diagram - Resource Allocation Query (US4.1.6)</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="451.9717" x="574.7092" y="27.9951">Sequence Diagram - Resource Allocation Query (US4.1.6)</text><rect fill="none" height="482.7344" style="stroke:#000000;stroke-width:1.5;" width="1379.3247" x="213.0654" y="279.125"/><rect fill="none" height="321.2656" style="stroke:#000000;stroke-width:1.5;" width="1359.3247" x="223.0654" y="433.5938"/><g class="participant-lifeline" data-entity-uid="part1" data-qualified-name="Operator" id="part1-lifeline"><g><title>Logistics Operator</title><rect fill="#000000" fill-opacity="0.00000" height="660.2656" width="8" x="67.9604" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="71" x2="71" y1="118.5938" y2="778.8594"/></g></g><g class="participant-lifeline" data-entity-uid="part2" data-qualified-name="SPA" id="part2-lifeline"><g><title>SPA</title><rect fill="#000000" fill-opacity="0.00000" height="660.2656" width="8" x="253.5654" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="257.0654" x2="257.0654" y1="118.5938" y2="778.8594"/></g></g><g class="participant-lifeline" data-entity-uid="part3" data-qualified-name="Ctrl" id="part3-lifeline"><g><title>PhysicalResourceController</title><rect fill="#000000" fill-opacity="0.00000" height="660.2656" width="8" x="847.9341" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="851.3027" x2="851.3027" y1="118.5938" y2="778.8594"/></g></g><g class="participant-lifeline" data-entity-uid="part4" data-qualified-name="App" id="part4-lifeline"><g><title>PhysicalResourceService</title><rect fill="#000000" fill-opacity="0.00000" height="660.2656" width="8" x="1193.4619" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1196.5464" x2="1196.5464" y1="118.5938" y2="778.8594"/></g></g><g class="participant-lifeline" data-entity-uid="part5" data-qualified-name="Repo" id="part5-lifeline"><g><title>OperationPlanRepo</title><rect fill="#000000" fill-opacity="0.00000" height="660.2656" width="8" x="1497.7656" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1501.1411" x2="1501.1411" y1="118.5938" y2="778.8594"/></g></g><g class="participant participant-head" data-entity-uid="part1" data-qualified-name="Operator" id="part1-head"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127.9209" x="5" y="115.292">Logistics Operator</text><ellipse cx="71.9604" cy="50.7969" fill="#E3E3E3" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M71.9604,58.7969 L71.9604,85.7969 M58.9604,66.7969 L84.9604,66.7969 M71.9604,85.7969 L58.9604,100.7969 M71.9604,85.7969 L84.9604,100.7969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-entity-uid="part1" data-qualified-name="Operator" id="part1-tail"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127.9209" x="5" y="790.8545">Logistics Operator</text><ellipse cx="71.9604" cy="802.6563" fill="#E3E3E3" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M71.9604,810.6563 L71.9604,837.6563 M58.9604,818.6563 L84.9604,818.6563 M71.9604,837.6563 L58.9604,852.6563 M71.9604,837.6563 L84.9604,852.6563" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-entity-uid="part2" data-qualified-name="SPA" id="part2-head"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.9063" x="241.1123" y="115.292">SPA</text><path d="M237.0654,74.2969 L237.0654,98.2969 M237.0654,86.2969 L254.0654,86.2969" fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="266.0654" cy="86.2969" fill="#E3E3E3" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-entity-uid="part2" data-qualified-name="SPA" id="part2-tail"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="26.9063" x="241.1123" y="790.8545">SPA</text><path d="M237.0654,798.1563 L237.0654,822.1563 M237.0654,810.1563 L254.0654,810.1563" fill="none" style="stroke:#181818;stroke-width:0.5;"/><ellipse cx="266.0654" cy="810.1563" fill="#E3E3E3" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-entity-uid="part3" data-qualified-name="Ctrl" id="part3-head"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="191.2627" x="753.3027" y="115.292">PhysicalResourceController</text><ellipse cx="851.9341" cy="86.2969" fill="#E3E3E3" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="847.9341,74.2969,853.9341,69.2969,851.9341,74.2969,853.9341,79.2969,847.9341,74.2969" style="stroke:#181818;stroke-width:1;"/></g><g class="participant participant-tail" data-entity-uid="part3" data-qualified-name="Ctrl" id="part3-tail"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="191.2627" x="753.3027" y="790.8545">PhysicalResourceController</text><ellipse cx="851.9341" cy="810.1563" fill="#E3E3E3" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="847.9341,798.1563,853.9341,793.1563,851.9341,798.1563,853.9341,803.1563,847.9341,798.1563" style="stroke:#181818;stroke-width:1;"/></g><g class="participant participant-head" data-entity-uid="part4" data-qualified-name="App" id="part4-head"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="173.8311" x="1107.5464" y="115.292">PhysicalResourceService</text><ellipse cx="1197.4619" cy="86.2969" fill="#E3E3E3" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="1193.4619,74.2969,1199.4619,69.2969,1197.4619,74.2969,1199.4619,79.2969,1193.4619,74.2969" style="stroke:#181818;stroke-width:1;"/></g><g class="participant participant-tail" data-entity-uid="part4" data-qualified-name="App" id="part4-tail"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="173.8311" x="1107.5464" y="790.8545">PhysicalResourceService</text><ellipse cx="1197.4619" cy="810.1563" fill="#E3E3E3" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="1193.4619,798.1563,1199.4619,793.1563,1197.4619,798.1563,1199.4619,803.1563,1193.4619,798.1563" style="stroke:#181818;stroke-width:1;"/></g><g class="participant participant-head" data-entity-uid="part5" data-qualified-name="Repo" id="part5-head"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.249" x="1431.1411" y="115.292">OperationPlanRepo</text><ellipse cx="1501.7656" cy="86.2969" fill="#E3E3E3" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="1489.7656" x2="1513.7656" y1="100.2969" y2="100.2969"/></g><g class="participant participant-tail" data-entity-uid="part5" data-qualified-name="Repo" id="part5-tail"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.249" x="1431.1411" y="790.8545">OperationPlanRepo</text><ellipse cx="1501.7656" cy="810.1563" fill="#E3E3E3" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="1489.7656" x2="1513.7656" y1="824.1563" y2="824.1563"/></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1602.3901" x="0" y="149.1602"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1602.3901" y1="149.1602" y2="149.1602"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1602.3901" y1="152.1602" y2="152.1602"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="262.5425" x="669.9238" y="138.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="244.0166" x="675.9238" y="154.6606">Submit resource allocation query</text><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg1"><polygon fill="#181818" points="245.5654,188.8594,255.5654,192.8594,245.5654,196.8594,249.5654,192.8594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="71.9604" x2="251.5654" y1="192.8594" y2="192.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161.605" x="78.9604" y="187.7935">Select resource + period</text></g><g class="message" data-entity-1="part2" data-entity-2="part3" id="msg2"><polygon fill="#181818" points="839.9341,217.9922,849.9341,221.9922,839.9341,225.9922,843.9341,221.9922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="257.5654" x2="845.9341" y1="221.9922" y2="221.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="570.3687" x="264.5654" y="216.9263">GET /api/resources/{resourceType}/{resourceId}/allocations?from={date}&amp;to={date}</text></g><g class="message" data-entity-1="part3" data-entity-2="part3" id="msg3"><line style="stroke:#181818;stroke-width:1;" x1="851.9341" x2="893.9341" y1="251.125" y2="251.125"/><line style="stroke:#181818;stroke-width:1;" x1="893.9341" x2="893.9341" y1="251.125" y2="264.125"/><line style="stroke:#181818;stroke-width:1;" x1="852.9341" x2="893.9341" y1="264.125" y2="264.125"/><polygon fill="#181818" points="862.9341,260.125,852.9341,264.125,862.9341,268.125,858.9341,264.125" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="265.0591" x="858.9341" y="246.0591">validate query params (types, presence)</text></g><path d="M213.0654,279.125 L277.5083,279.125 L277.5083,286.2578 L267.5083,296.2578 L213.0654,296.2578 L213.0654,279.125" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="482.7344" style="stroke:#000000;stroke-width:1.5;" width="1379.3247" x="213.0654" y="279.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="228.0654" y="292.1919">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="173.8569" x="292.5083" y="291.3354">[Invalid request (syntactic)]</text><g class="message" data-entity-1="part3" data-entity-2="part2" id="msg4"><polygon fill="#181818" points="268.5654,328.5234,258.5654,332.5234,268.5654,336.5234,264.5654,332.5234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="262.5654" x2="850.9341" y1="332.5234" y2="332.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.6045" x="274.5654" y="312.3247">400 Bad Request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177.0107" x="274.5654" y="327.4575">ProblemDetails (validation)</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="213.0654" x2="1592.3901" y1="341.5234" y2="341.5234"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="93.0918" x="218.0654" y="351.7339">[Valid request]</text><g class="message" data-entity-1="part3" data-entity-2="part4" id="msg5"><polygon fill="#181818" points="1185.4619,372.4609,1195.4619,376.4609,1185.4619,380.4609,1189.4619,376.4609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="851.9341" x2="1191.4619" y1="376.4609" y2="376.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="321.5278" x="858.9341" y="371.395">getAllocation(resourceType, resourceId, from, to)</text></g><g class="message" data-entity-1="part4" data-entity-2="part4" id="msg6"><line style="stroke:#181818;stroke-width:1;" x1="1197.4619" x2="1239.4619" y1="405.5938" y2="405.5938"/><line style="stroke:#181818;stroke-width:1;" x1="1239.4619" x2="1239.4619" y1="405.5938" y2="418.5938"/><line style="stroke:#181818;stroke-width:1;" x1="1198.4619" x2="1239.4619" y1="418.5938" y2="418.5938"/><polygon fill="#181818" points="1208.4619,414.5938,1198.4619,418.5938,1208.4619,422.5938,1204.4619,418.5938" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174.7637" x="1204.4619" y="400.5278">validate period (from &lt; to)</text></g><path d="M223.0654,433.5938 L287.5083,433.5938 L287.5083,440.7266 L277.5083,450.7266 L223.0654,450.7266 L223.0654,433.5938" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="321.2656" style="stroke:#000000;stroke-width:1.5;" width="1359.3247" x="223.0654" y="433.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="238.0654" y="446.6606">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="95.7773" x="302.5083" y="445.8042">[Invalid period]</text><g class="message" data-entity-1="part4" data-entity-2="part3" id="msg7"><polygon fill="#181818" points="862.9341,467.8594,852.9341,471.8594,862.9341,475.8594,858.9341,471.8594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="856.9341" x2="1196.4619" y1="471.8594" y2="471.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172.1992" x="868.9341" y="466.7935">Result.fail(ValidationError)</text></g><g class="message" data-entity-1="part3" data-entity-2="part2" id="msg8"><polygon fill="#181818" points="268.5654,512.125,258.5654,516.125,268.5654,520.125,264.5654,516.125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="262.5654" x2="850.9341" y1="516.125" y2="516.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111.6045" x="274.5654" y="495.9263">400 Bad Request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98.7314" x="274.5654" y="511.0591">ProblemDetails</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="223.0654" x2="1582.3901" y1="525.125" y2="525.125"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="85.1963" x="228.0654" y="535.3354">[Valid period]</text><g class="message" data-entity-1="part4" data-entity-2="part5" id="msg9"><polygon fill="#181818" points="1489.7656,556.0625,1499.7656,560.0625,1489.7656,564.0625,1493.7656,560.0625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1197.4619" x2="1495.7656" y1="560.0625" y2="560.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161.2686" x="1204.4619" y="554.9966">findSavedPlans(from, to)</text></g><g class="message" data-entity-1="part5" data-entity-2="part4" id="msg10"><polygon fill="#181818" points="1208.4619,585.1953,1198.4619,589.1953,1208.4619,593.1953,1204.4619,589.1953" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="1202.4619" x2="1500.7656" y1="589.1953" y2="589.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.4956" x="1214.4619" y="584.1294">OperationPlan[]</text></g><g class="message" data-entity-1="part4" data-entity-2="part4" id="msg11"><line style="stroke:#181818;stroke-width:1;" x1="1197.4619" x2="1239.4619" y1="618.3281" y2="618.3281"/><line style="stroke:#181818;stroke-width:1;" x1="1239.4619" x2="1239.4619" y1="618.3281" y2="631.3281"/><line style="stroke:#181818;stroke-width:1;" x1="1198.4619" x2="1239.4619" y1="631.3281" y2="631.3281"/><polygon fill="#181818" points="1208.4619,627.3281,1198.4619,631.3281,1208.4619,635.3281,1204.4619,631.3281" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177.7471" x="1204.4619" y="613.2622">extract relevant operations</text></g><g class="message" data-entity-1="part4" data-entity-2="part4" id="msg12"><line style="stroke:#181818;stroke-width:1;" x1="1197.4619" x2="1239.4619" y1="660.4609" y2="660.4609"/><line style="stroke:#181818;stroke-width:1;" x1="1239.4619" x2="1239.4619" y1="660.4609" y2="673.4609"/><line style="stroke:#181818;stroke-width:1;" x1="1198.4619" x2="1239.4619" y1="673.4609" y2="673.4609"/><polygon fill="#181818" points="1208.4619,669.4609,1198.4619,673.4609,1208.4619,677.4609,1204.4619,673.4609" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="290.3037" x="1204.4619" y="655.395">aggregate allocation time + operation count</text></g><g class="message" data-entity-1="part4" data-entity-2="part3" id="msg13"><polygon fill="#181818" points="862.9341,698.5938,852.9341,702.5938,862.9341,706.5938,858.9341,702.5938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="856.9341" x2="1196.4619" y1="702.5938" y2="702.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="280.9663" x="868.9341" y="697.5278">Result.ok(ResourceAllocationSummaryDto)</text></g><g class="message" data-entity-1="part3" data-entity-2="part2" id="msg14"><polygon fill="#181818" points="268.5654,742.8594,258.5654,746.8594,268.5654,750.8594,264.5654,746.8594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="262.5654" x2="850.9341" y1="746.8594" y2="746.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47.7026" x="274.5654" y="726.6606">200 OK</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="251.7861" x="274.5654" y="741.7935">Body: ResourceAllocationSummaryDto</text></g><!--SRC=[bLDDRzim3BthLn0v30wMZsueTYYM36bJ3CK6DAkxNjOT58jnXCgIAybPWoB_VPGSVwp32knaMNnyv7kat8FK9RUyWC9eassjAH2yhP2vDkAsN9XVKkUmuSeXyz8hX1GVAzGPmbBoFC36S8FEL9Qk5agPZ7jfD7ohqEuX-PwUJjvDFWmPuvat5WPVJIwTbvc3wn8jfxi1yEw7hKsb1QVKGRfQn11zMMQqjqR1OBNTEvbnrPIyg0CAQveBRzM_mIdQdSmm8XTboL2J9AfK5wUkLuhh6onDH8G3OxCPfDMwa1viev9tAX-ZojcCDVt3U1uQXZFoIM7MoteB1956i10cL6YLO9ylRs7AIpbjW6xwt1nlzoKUkjyhSPXsjTsd3GrjzYounyCRRuudnY9nLs37bGoHOwznj0uIJznk12MHXsc60IaFLph2gMj2Em-9ssjFavFPa47DE6uLdfwSm3aNP5G4t-kLDMk5nH8zbufg74jJiqE6j45mroTl2UTX6CINe-yMAEcRC8BEWn44tIFmXdg6cDeoj5fhgo49KFZOOFiAZyC0E59qXj6sLCfFDgGXkMiLN5fhx33Y_yy6IkbfVrbs7jUCM3PIYvJlK8GTT4cdCK0ZPjpA_6DVV_naVReQWK_UyhXz2dTSUp1DYliRpFFSOXviwsssbqNOsJOFCdgOdhrYc7b8ceVMZJ6jYe9Uyx9HyiAxz-JTzPTxVMx4_WnUImysQa5FLlm6]--></g></svg>